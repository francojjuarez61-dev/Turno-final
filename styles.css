:root{
  /* iOS 26-esque “liquid glass” (UI only)
     No se modifican estados, lógica ni flujos: solo look & feel. */

  --bg: #070813;
  --surface: rgba(255,255,255,0.08);
  --glass: rgba(255,255,255,0.10);
  --glass-strong: rgba(255,255,255,0.14);
  --hairline: rgba(255,255,255,0.14);

  --text: rgba(255,255,255,0.92);
  --muted: rgba(255,255,255,0.62);

  /* Accent mesh (vivos / iOS-ish) */
  --a1: #B86BFF;   /* purple */
  --a2: #34D7FF;   /* cyan */
  --a3: #FF4FD8;   /* pink */
  --a4: #7CFFB2;   /* mint */

  /* Ring gradients (driven into SVG with CSS vars) */
  --ring-a: var(--a1);
  --ring-b: var(--a2);
  --ring-c: rgba(255,255,255,0.95);

  --danger-a: #FF2D55;
  --danger-b: #FF3B30;
  --danger-c: rgba(255,255,255,0.95);

  /* Warning (poco tiempo) */
  --warn-a: #FFD60A;
  --warn-b: #FF9F0A;
  --warn-c: rgba(255,255,255,0.95);

  /* Back-compat */
  --primary: var(--a2);
  --ice: var(--a2);
  --ice2: #1FB9FF;
  --red: #8A0F1D;
  --red2: var(--danger-a);

  --track: rgba(255,255,255,0.14);
}


html, body{
  overscroll-behavior-y: none;
  -webkit-text-size-adjust: 100%;
  background: var(--bg);
}


html, body{
  width:100%;
  height:100%;
  min-height:100%;
  background-color: var(--bg);
  overscroll-behavior-y: none;
}
*{ box-sizing: border-box; }
body{
  position: relative;
  background:
    radial-gradient(1200px 760px at 18% 6%, rgba(184,107,255,0.38), rgba(7,8,19,0) 62%),
    radial-gradient(980px 720px at 82% 18%, rgba(52,215,255,0.32), rgba(7,8,19,0) 64%),
    radial-gradient(860px 720px at 52% 78%, rgba(255,79,216,0.24), rgba(7,8,19,0) 66%),
    radial-gradient(900px 700px at 12% 88%, rgba(124,255,178,0.12), rgba(7,8,19,0) 70%),
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(7,8,19,0.96) 56%, rgba(7,8,19,1)),
    var(--bg);
  color: var(--text);
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
  overflow: hidden;
  overscroll-behavior: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

/* UI only: Fondo personalizado por imagen (se aplica como capa debajo del mesh) */
body::after{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: var(--app-bg, none);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0;
  transform: translateZ(0);
  filter: blur(6px) saturate(120%);
  z-index: -3;
  transition: opacity 240ms ease;
}

body.has-appbg::after{
  opacity: 0.68;
}

/* animated mesh layer (subtle, iOS-like) */
body::before{
  content:"";
  position: fixed;
  inset: -18%;
  pointer-events: none;
  background:
    radial-gradient(540px 420px at 20% 25%, rgba(184,107,255,0.18), rgba(0,0,0,0) 62%),
    radial-gradient(520px 460px at 82% 32%, rgba(52,215,255,0.16), rgba(0,0,0,0) 64%),
    radial-gradient(520px 520px at 52% 78%, rgba(255,79,216,0.12), rgba(0,0,0,0) 66%);
  filter: blur(18px);
  opacity: 0.9;
  transform: translate3d(0,0,0);
  animation: meshDrift 16s ease-in-out infinite;
  z-index: -2;
}

@keyframes meshDrift{
  0%{ transform: translate3d(-1.5%, -1.2%, 0) scale(1.02); }
  50%{ transform: translate3d(1.8%, 1.4%, 0) scale(1.06); }
  100%{ transform: translate3d(-1.5%, -1.2%, 0) scale(1.02); }
}

.app{
  height: 100%;
  min-height: 100vh;
  min-height: 100svh;
  min-height: 100dvh;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
  /* Deja espacio real para la barra superior (notch + botones). */
  padding-top: calc(env(safe-area-inset-top) + 18px);
  padding-bottom: calc(env(safe-area-inset-bottom) + 28px);
}


.topbar{
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 20;
  display:flex;
  align-items:center;
  justify-content: flex-end;
  gap: 0;
  padding: calc(env(safe-area-inset-top) + 10px) 14px 10px;
  background: linear-gradient(to bottom, rgba(7,8,19,0.78), rgba(7,8,19,0));
  backdrop-filter: blur(16px) saturate(140%);
}
.topbar-actions{
  display:flex;
  gap: 10px;
}
.topbar-btn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  width: 44px;
  height: 44px;
  padding: 0;
  border-radius: 16px;
  border: 1px solid var(--hairline);
  background: linear-gradient(180deg, rgba(255,255,255,0.14), rgba(255,255,255,0.06));
  color: rgba(255,255,255,0.88);
  font-weight: 700;
  font-size: 13px;
  backdrop-filter: blur(16px) saturate(160%);
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.06) inset,
    0 12px 30px rgba(0,0,0,0.35);
  -webkit-tap-highlight-color: transparent;
  transition: transform .22s ease, border-color .22s ease, background .22s ease, box-shadow .22s ease;
}
.topbar-btn:active{ transform: scale(0.98); }
.topbar-ic{
  width: 18px;
  height: 18px;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity: 0.85;
}
.topbar-tx{
  /* oculto visualmente para no tapar el aro, pero accesible */
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
.hero{
  padding: 22px 16px 10px;
  display:flex;
  justify-content:center;
  align-items:center;
}

.ring{
  position: relative;
  width: min(82vw, 360px);
  aspect-ratio: 1/1;
  border: 0;
  background: transparent;
  padding: 0;
  border-radius: 999px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

/* liquid glass sheen (UI only) */
.ring::before{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius: 999px;
  background:
    conic-gradient(from 180deg at 50% 50%,
      rgba(255,255,255,0.00) 0%,
      rgba(255,255,255,0.16) 12%,
      rgba(255,255,255,0.00) 22%,
      rgba(255,255,255,0.00) 58%,
      rgba(255,255,255,0.12) 70%,
      rgba(255,255,255,0.00) 82%,
      rgba(255,255,255,0.00) 100%);
  filter: blur(10px);
  opacity: 0.55;
  transform: translate3d(0,0,0);
  pointer-events:none;
  animation: sheenSpin 9s linear infinite;
}

/* outer pulsating light (UI) */
.ring::after{
  content:"";
  position:absolute;
  /* UI only: acercamos el halo al botón (antes quedaba muy lejos) */
  inset:-2px;
  border-radius: 999px;
  pointer-events:none;
  opacity: 0.35;
  transform: translate3d(0,0,0);
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.06) inset,
    0 0 22px rgba(255,255,255,0.05),
    0 0 46px var(--pulse-color, rgba(52,215,255,0.26));
  animation: ringGlowPulse 1.7s ease-in-out infinite;
  mix-blend-mode: screen;
}

.ring[data-running="1"]::after{ opacity: 0.95; }

@keyframes ringGlowPulse{
  0%,100%{ transform: scale(1.00); filter: blur(0px); }
  /* pulso más sutil y pegado al botón */
  50%{ transform: scale(1.007); filter: blur(0.12px); }
}

@keyframes sheenSpin{
  0%{ transform: rotate(0deg); }
  100%{ transform: rotate(360deg); }
}

.ring-ambient{
  position:absolute;
  /* UI only: halo ambiental más cerca del botón */
  inset:-7%;
  border-radius:999px;
  opacity: .75;
  filter: blur(16px);
  background:
    radial-gradient(circle at 36% 32%, rgba(184,107,255,0.26), rgba(0,0,0,0) 62%),
    radial-gradient(circle at 62% 58%, rgba(52,215,255,0.22), rgba(0,0,0,0) 64%),
    radial-gradient(circle at 52% 78%, rgba(255,79,216,0.16), rgba(0,0,0,0) 70%);
  transition: background .28s ease, opacity .28s ease;
  pointer-events:none;
  animation: ambientFloat 7.5s ease-in-out infinite;
}

@keyframes ambientFloat{
  0%{ transform: translate3d(0,0,0) scale(1.00); }
  50%{ transform: translate3d(0,-1.2%,0) scale(1.03); }
  100%{ transform: translate3d(0,0,0) scale(1.00); }
}

.ring-svg{
  position:absolute;
  inset:0;
  transform: rotate(-90deg);
}

.ring-track,
.ring-progress{
  fill: none;
  /* UI only: aro menos grueso (más premium) */
  stroke-width: 12;
}

/* UI only: el track es un circulo completo; con linecap:round puede aparecer un "punto"/seam
   en algunos navegadores (iOS/Safari). Lo dejamos en butt para evitar ese artefacto visual. */
.ring-track{ stroke-linecap: butt; }

/* UI only: el indicador de "punto" lo maneja .ring-cap.
   En iOS/Safari, stroke-linecap:round en el progreso puede mostrar un segundo punto
   (el extremo inicial del trazo) que se percibe como decorativo/erróneo. Lo pasamos a butt
   para eliminar ese artefacto sin cambiar lógica ni cálculos. */
.ring-progress{ stroke-linecap: butt; }

.ring-track{ stroke: var(--track); }

.ring-track{ stroke: rgba(255,255,255,0.14); }

.ring-progress{
  /* gradient definido en el SVG (UI only) */
  stroke: url(#ringCyan);
  filter: url(#glowIce);
  stroke-dasharray: 490;
  /* UI only: aro completo (sin animación de "progreso" que se borra) */
  stroke-dashoffset: 0;
  transition: stroke .32s ease, filter .32s ease, opacity .32s ease;
}

/* Respiración iOS: el aro late suave mientras corre el timer */
.ring[data-running="1"] .ring-progress{
  animation: ringBreath 1.6s ease-in-out infinite;
}

@keyframes ringBreath{
  0%,100%{ opacity: 0.78; }
  50%{ opacity: 1; }
}

.ring-cap{
  fill: var(--a2);
  opacity: 0;
  filter: drop-shadow(0 0 12px rgba(52,215,255,0.30));
  transition: opacity .25s ease, fill .32s ease;
  /* UI only: ocultamos el cap para que no se perciba como progreso */
  animation: none;
}

@keyframes capPulse{ 0%,100%{ transform: scale(1); } 50%{ transform: scale(1.08); } }

.ring-content{
  position:absolute;
  inset: 18%;
  border-radius: 999px;
  overflow: hidden;
  background:
    radial-gradient(circle at 35% 22%, rgba(255,255,255,0.18), rgba(255,255,255,0.06) 55%, rgba(255,255,255,0.04) 100%),
    linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.06));
  border: 1px solid var(--hairline);
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.05) inset,
    0 24px 80px rgba(0,0,0,0.58);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 10px;
  backdrop-filter: blur(18px) saturate(170%);
}

/* UI only: imagen personalizada dentro del botón */
.ring-content.has-btnbg::before{
  content:"";
  position:absolute;
  inset:0;
  background-image: var(--btn-bg, none);
  background-size: cover;
  background-position: center;
  filter: saturate(1.05) contrast(1.02);
  opacity: 0.95;
  transform: translate3d(0,0,0);
}

/* mantenemos legibilidad arriba de la imagen */
.ring-content.has-btnbg::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 35% 22%, rgba(255,255,255,0.18), rgba(255,255,255,0.06) 55%, rgba(255,255,255,0.04) 100%),
    linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.26));
  pointer-events:none;
}

.ring-content > *{ position: relative; z-index: 1; }

.ring-state{
  font-weight: 700;
  letter-spacing: .12em;
  font-size: 12px;
  color: rgba(255,255,255,0.72);
}

.ring-time{
  font-weight: 860;
  font-size: clamp(42px, 8.6vw, 62px);
  line-height: 1;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.02em;
  background: linear-gradient(90deg, rgba(255,255,255,0.98), rgba(52,215,255,0.98), rgba(184,107,255,0.96), rgba(255,79,216,0.92));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 10px 26px rgba(0,0,0,0.35);
}

.ring-end{
  font-size: 13px;
  font-weight: 500;
  letter-spacing: .02em;
  color: var(--muted);
}

.ring-meta{
  font-size: 14px;
  color: rgba(255,255,255,0.62);
}

.ring[data-mode="normal"]{ --pulse-color: rgba(52,215,255,0.28); }
.ring[data-mode="normal"] .ring-progress{ stroke: url(#ringCyan); filter: url(#glowIce); }
.ring[data-mode="normal"] .ring-ambient{
  background:
    radial-gradient(circle at 36% 32%, rgba(184,107,255,0.26), rgba(0,0,0,0) 62%),
    radial-gradient(circle at 62% 58%, rgba(52,215,255,0.22), rgba(0,0,0,0) 64%),
    radial-gradient(circle at 52% 78%, rgba(255,79,216,0.16), rgba(0,0,0,0) 70%);
}

.ring[data-mode="warning"]{ --pulse-color: rgba(255,214,10,0.30); }
.ring[data-mode="warning"] .ring-progress{ stroke: url(#ringYellow); filter: url(#glowYellow); }
.ring[data-mode="warning"] .ring-cap{ fill: var(--warn-a); filter: drop-shadow(0 0 14px rgba(255,214,10,0.26)); }
.ring[data-mode="warning"] .ring-ambient{
  background:
    radial-gradient(circle at 36% 32%, rgba(255,214,10,0.28), rgba(0,0,0,0) 62%),
    radial-gradient(circle at 66% 60%, rgba(255,159,10,0.22), rgba(0,0,0,0) 66%),
    radial-gradient(circle at 52% 78%, rgba(255,255,255,0.10), rgba(0,0,0,0) 72%);
  opacity: .92;
}

.ring[data-mode="overtime"]{ --pulse-color: rgba(255,45,85,0.30); }
.ring[data-mode="overtime"] .ring-progress{ stroke: url(#ringRed); filter: url(#glowRed); }
.ring[data-mode="overtime"] .ring-cap{ fill: var(--red2); filter: drop-shadow(0 0 12px rgba(255,43,74,0.28)); }
.ring[data-mode="overtime"] .ring-ambient{
  background:
    radial-gradient(circle at 40% 38%, rgba(255,45,85,0.30), rgba(0,0,0,0) 62%),
    radial-gradient(circle at 64% 60%, rgba(255,59,48,0.22), rgba(0,0,0,0) 66%),
    radial-gradient(circle at 52% 78%, rgba(255,255,255,0.10), rgba(0,0,0,0) 72%);
  opacity: .95;
}

.ring:active .ring-content{
  transform: scale(0.985);
  transition: transform .08s ease;
}

.below-hero{
  padding: 10px 16px 6px;
  display:flex;
  justify-content:center;
}

.pill-btn{
  width: min(82vw, 360px);
  padding: 18px 18px;
  border-radius: 999px;
  border: 1px solid var(--hairline);
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.16), rgba(255,255,255,0.06) 58%, rgba(255,255,255,0.04) 100%),
    linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  color: var(--text);
  font-weight: 650;
  letter-spacing: .01em;
  backdrop-filter: blur(18px) saturate(170%);
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.05) inset,
    0 18px 44px rgba(0,0,0,0.46);
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
  transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease, background .22s ease;
}
.pill-btn:active{ transform: scale(0.985); }

.pill-btn[data-state="ok"]{
  border-color: rgba(52,215,255,0.34);
  box-shadow:
    0 0 0 1px rgba(52,215,255,0.10) inset,
    0 0 30px rgba(52,215,255,0.16);
}
.pill-btn[data-state="yellow"]{
  border-color: rgba(255,220,80,0.32);
  box-shadow: 0 0 30px rgba(255,220,80,0.12);
}
.pill-btn[data-state="red"]{
  border-color: rgba(255,45,85,0.34);
  box-shadow: 0 0 34px rgba(255,45,85,0.14);
}

/* MODAL */
.modal{ position: fixed; inset: 0; display:none; z-index: 50; }
.modal.is-open{ display:block; }
.modal-backdrop{ position:absolute; inset:0; background: rgba(0,0,0,0.55); backdrop-filter: blur(6px); }

.modal-sheet{
  position:absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 0;
  width: min(92vw, 420px);
  border-radius: 22px 22px 0 0;
  background:
    radial-gradient(circle at 28% 18%, rgba(255,255,255,0.18), rgba(255,255,255,0.07) 58%, rgba(255,255,255,0.05) 100%),
    linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  border: 1px solid var(--hairline);
  box-shadow: 0 -30px 90px rgba(0,0,0,0.62);
  backdrop-filter: blur(22px) saturate(180%);
  /* Allow the sheet content (e.g., Personalizar) to scroll on iPhone */
  max-height: calc(100vh - env(safe-area-inset-top) - 12px);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;

  padding: 10px 14px calc(env(safe-area-inset-bottom) + 18px);
  animation: sheetIn .28s ease-out;
}
@keyframes sheetIn{
  from{ transform: translateX(-50%) translateY(18px); opacity: 0.65; }
  to{ transform: translateX(-50%) translateY(0); opacity: 1; }
}

.modal-grab{ width: 46px; height: 5px; border-radius: 999px; background: rgba(255,255,255,0.18); margin: 6px auto 10px; }
.modal-header{ display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 4px 2px 12px; }
.modal-title{ font-weight: 760; font-size: 18px; }
.modal-subtitle{ margin-top: 2px; font-size: 13px; color: var(--muted); }

.icon-btn{ width: 36px; height: 36px; border-radius: 12px; border: 1px solid var(--hairline); background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.90); cursor:pointer; backdrop-filter: blur(16px) saturate(160%); transition: transform .22s ease, background .22s ease, border-color .22s ease; }
.icon-btn:active{ transform: scale(0.985); }

.step{ padding: 2px 2px 10px; }
.is-hidden{ display:none; }

.bubble-row{ display:flex; gap: 10px; justify-content:space-between; }
.bubble-grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }

.bubble{
  padding: 14px 14px;
  border-radius: 999px;
  border: 1px solid var(--hairline);
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,0.16), rgba(255,255,255,0.06) 58%, rgba(255,255,255,0.04) 100%),
    linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  color: rgba(255,255,255,0.92);
  font-weight: 680;
  letter-spacing: .01em;
  position: relative;
  overflow:hidden;
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
  transform: translateY(0);
  transition: transform .28s ease, border-color .28s ease, box-shadow .28s ease, background .28s ease;
}

.bubble-ice{ box-shadow: 0 0 0 1px rgba(52,215,255,0.10) inset, 0 0 22px rgba(52,215,255,0.10); }
.bubble:active{ transform: scale(0.985); }

.bubble.is-selected{
  border-color: rgba(52,215,255,0.60);
  box-shadow:
    0 0 0 1px rgba(52,215,255,0.22) inset,
    0 0 34px rgba(52,215,255,0.20),
    0 0 0 1px rgba(255,255,255,0.06);
}

.hint{ margin-top: 10px; font-size: 12px; color: var(--muted); }

.summary{ margin-top: 10px; display:flex; gap: 8px; flex-wrap: wrap; }
.chip{ padding: 8px 10px; border-radius: 999px; background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.12); color: rgba(255,255,255,0.78); font-size: 12px; backdrop-filter: blur(14px) saturate(160%); }

.alert{ margin-top: 10px; padding: 12px; border-radius: 16px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,43,74,0.22); box-shadow: 0 0 36px rgba(255,43,74,0.10); }
.alert-title{ font-weight: 760; margin-bottom: 6px; }
.alert-msg{ font-size: 13px; color: rgba(255,255,255,0.72); }
.alert-actions{ margin-top: 10px; display:flex; justify-content:flex-end; gap: 10px; }
.btn-ghost{ padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.88); }
.btn-danger{ padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,45,85,0.36); background: rgba(255,45,85,0.14); color: rgba(255,255,255,0.92); }

/* QUEUE */
.queue-wrap{ width: min(86vw, 420px); margin: 12px auto 30px; padding: 0 10px; }
.queue-title{ font-weight: 700; color: rgba(255,255,255,0.86); margin: 12px 2px 8px; }
.queue-list{ display:flex; flex-direction:column; gap: 12px; }

/* Icono tenue cuando está vacía (UI only) */
.queue-list:empty{
  min-height: 120px;
  border-radius: 22px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
}
.queue-list:empty::before{
  content: "\25CC";
  display:block;
  text-align:center;
  font-size: 40px;
  color: rgba(255,255,255,0.35);
  padding: 34px 0 10px;
  letter-spacing: .08em;
}
.queue-list:empty::after{
  content: "Sin clientes en espera";
  display:block;
  text-align:center;
  font-size: 13px;
  color: var(--muted);
  padding-bottom: 26px;
}

/* VIP SWIPE LIST */
.swipe-item{ position: relative; border-radius: 20px; overflow: hidden; animation: itemIn .22s ease-out; }
@keyframes itemIn{ from{ opacity:0; transform: translateY(10px) scale(0.99);} to{ opacity:1; transform: translateY(0) scale(1);} }

@keyframes itemOut{ from{ opacity:1; transform: translateY(0) scale(1);} to{ opacity:0; transform: translateY(8px) scale(0.985);} }
.swipe-item.is-removing{ animation: itemOut .18s ease-in forwards; }

.swipe-delete{ position:absolute; inset: 0; display:flex; justify-content:flex-end; align-items:stretch; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.10); }
.delete-btn{ width: 110px; border: 0; color: rgba(255,255,255,0.96); font-weight: 860; letter-spacing: .01em; }

/* UI: Eliminar verde si el cliente entra en el horario, rojo si se pasa */
.swipe-item[data-limit="in"] .swipe-delete{ background: rgba(48,209,88,0.18); border-color: rgba(48,209,88,0.22); }
.swipe-item[data-limit="over"] .swipe-delete{ background: rgba(255,45,85,0.22); border-color: rgba(255,45,85,0.22); }

.delete-btn[data-state="safe"]{
  background: linear-gradient(180deg, rgba(48,209,88,0.86), rgba(52,199,89,0.72));
}
.delete-btn[data-state="danger"]{
  background: linear-gradient(180deg, rgba(255,45,85,0.82), rgba(255,59,48,0.72));
}

.swipe-content{
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(22px) saturate(180%);
  padding: 12px 12px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  transform: translateX(0);
  transition: transform .28s ease;
  will-change: transform;
}

.swipe-item.is-open .swipe-content{ transform: translateX(-110px); }

.q-left{ display:flex; gap: 10px; flex: 1; min-width:0; }
.q-main{ min-width:0; }
.q-title{ font-weight: 820; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; display:flex; align-items:center; gap:8px; }

.avatar{
  width: 38px;
  height: 38px;
  border-radius: 14px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex: 0 0 auto;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 0 26px rgba(52,215,255,0.12);
  color: rgba(255,255,255,0.92);
}

.svc-ic{ display:block; opacity: 0.95; filter: drop-shadow(0 0 12px rgba(52,215,255,0.14)); }

.next-badge{
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .08em;
  color: rgba(255,255,255,0.92);
  background: rgba(52,215,255,0.12);
  border: 1px solid rgba(52,215,255,0.24);
  box-shadow: 0 0 24px rgba(52,215,255,0.16);
}

.q-badges{ margin-top: 6px; display:flex; gap: 8px; flex-wrap: wrap; font-size: 12px; color: rgba(255,255,255,0.72); }
.badge{ padding: 6px 8px; border-radius: 999px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.10); backdrop-filter: blur(14px) saturate(160%); }

.q-right{ display:flex; flex-direction: column; align-items:flex-end; gap: 6px; flex: 0 0 auto; }
.q-wait{ font-weight: 900; }
.q-times{ font-size: 12px; color: var(--muted); text-align:right; }
.chev{ font-size: 18px; color: rgba(255,255,255,0.44); margin-top: 2px; }

.swipe-item.is-next .swipe-content{
  border-color: rgba(52,215,255,0.30);
  box-shadow: 0 0 0 1px rgba(52,215,255,0.10) inset, 0 0 40px rgba(52,215,255,0.10);
  position: relative;
  overflow: hidden;
}

.swipe-item.is-next .avatar{ box-shadow: 0 0 32px rgba(52,215,255,0.18); }

.swipe-item.is-next .swipe-content::after{
  content:"";
  position:absolute;
  inset:-40%;
  background: linear-gradient(120deg,
    rgba(255,255,255,0) 35%,
    rgba(52,215,255,0.10) 50%,
    rgba(255,255,255,0) 65%);
  transform: translateX(-40%);
  animation: sheen 2.4s ease-in-out infinite;
  pointer-events:none;
}
@keyframes sheen{
  0%{ transform: translateX(-40%); opacity: 0; }
  20%{ opacity: 1; }
  55%{ opacity: 1; }
  100%{ transform: translateX(40%); opacity: 0; }
}


/* SETTINGS + LOG (VIP) */

.form{
  display:flex;
  flex-direction:column;
  gap: 12px;
}
.form-group{
  display:flex;
  flex-direction:column;
  gap: 8px;
  padding: 12px;
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
}
.form-label{
  font-weight: 800;
  color: rgba(255,255,255,0.82);
}
.form-grid{
  display:grid;
  grid-template-columns: 1fr 90px;
  gap: 10px;
  align-items:center;
}
.form-grid .k{
  color: rgba(255,255,255,0.70);
  font-size: 13px;
}
.input{
  width: 100%;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.25);
  color: rgba(255,255,255,0.92);
  outline: none;
}
.input:focus{
  border-color: rgba(52,215,255,0.38);
  box-shadow: 0 0 0 3px rgba(52,215,255,0.10);
}
.form-actions{
  display:flex;
  justify-content:flex-end;
  gap: 10px;
  margin-top: 10px;
}
.btn-primary{
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(52,215,255,0.32);
  background: rgba(52,215,255,0.12);
  color: rgba(255,255,255,0.92);
  font-weight: 800;
}

.log-summary{
  display:flex;
  gap: 10px;
  margin: 4px 0 10px;
}
.log-card{
  flex: 1;
  padding: 12px;
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
}
.log-k{
  font-size: 12px;
  color: rgba(255,255,255,0.62);
}
.log-v{
  margin-top: 6px;
  font-weight: 900;
  font-size: 20px;
}
.log-list{
  display:flex;
  flex-direction:column;
  gap: 10px;
}
.log-item{
  padding: 12px;
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
}
.log-item .t{
  display:flex;
  justify-content:space-between;
  gap: 10px;
  font-weight: 800;
}
.log-item .s{
  margin-top: 6px;
  font-size: 12px;
  color: rgba(255,255,255,0.65);
}

/* ===== SETTINGS + LOG MODALS ===== */
.form-section{ padding: 2px 2px 10px; }
.form-row{ display:flex; justify-content:space-between; align-items:center; gap: 12px; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.06); }
.form-row:last-child{ border-bottom: 0; }
.form-label{ font-weight: 720; color: rgba(255,255,255,0.88); }
.form-input{
  width: 92px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.92);
  text-align:right;
  font-weight: 750;
  outline: none;
}
.form-input:focus{ border-color: rgba(52,215,255,0.38); box-shadow: 0 0 0 3px rgba(52,215,255,0.14); }

.form-actions{ display:flex; gap: 10px; justify-content:flex-end; padding-top: 10px; }
.btn-primary{
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(52,215,255,0.32);
  background: rgba(52,215,255,0.12);
  color: rgba(255,255,255,0.92);
  font-weight: 800;
}

.log-summary{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 4px 2px 12px; }
.log-card{
  border-radius: 18px;
  padding: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
}
.log-k{ font-size: 12px; color: rgba(255,255,255,0.60); }
.log-v{ font-size: 18px; font-weight: 850; margin-top: 4px; }

.log-list{ display:flex; flex-direction:column; gap: 10px; padding: 0 2px; max-height: 44vh; overflow-y: auto; -webkit-overflow-scrolling: touch; }
.log-item{
  border-radius: 18px;
  padding: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
}
.log-item .t{ display:flex; justify-content:space-between; gap: 10px; font-weight: 800; }
.log-item .s{ margin-top: 6px; font-size: 12px; color: rgba(255,255,255,0.62); }

/* Delete button in log (requires confirm in JS) */
.log-right{ display:flex; align-items:center; gap: 10px; }
.log-dur{ font-weight: 850; }
.log-del{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.78);
  font-size: 16px;
  line-height: 1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  -webkit-tap-highlight-color: transparent;
}
.log-del:active{ transform: scale(0.97); }

/* Allow vertical interactions inside sheets */
.modal-sheet{ touch-action: pan-y; }

/* ===== Full-screen editor (UI only) ===== */
.modal.modal-full .modal-backdrop{ background: rgba(0,0,0,0.62); backdrop-filter: blur(10px); }

.modal-full .editor{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  padding: calc(10px + env(safe-area-inset-top)) 12px calc(12px + env(safe-area-inset-bottom));
}

.editor-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 6px 2px 10px;
}

.editor-title{
  font-weight: 760;
  font-size: 16px;
  color: rgba(255,255,255,0.88);
}

.editor-stage{
  position:relative;
  flex: 1;
  min-height: 320px;
  border-radius: 22px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
}

.editor-canvas{
  width: 100%;
  height: 100%;
  display:block;
  touch-action: none; /* allow custom pan/pinch */
}

.editor-mask{
  position:absolute;
  inset:0;
  pointer-events:none;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* darken outside of the circle */
.editor-mask::before{
  content:"";
  position:absolute;
  inset:0;
  background: rgba(0,0,0,0.52);
}

.editor-circle{
  width: min(62vmin, 330px);
  aspect-ratio: 1/1;
  border-radius: 999px;
  box-shadow:
    0 0 0 2px rgba(255,255,255,0.42),
    0 10px 40px rgba(0,0,0,0.55);
  position: relative;
}

/* create the hole effect */
.editor-circle::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius: 999px;
  background: transparent;
}

.editor-mask::before{ -webkit-mask: radial-gradient(circle at center, transparent 0 49%, #000 50%); }

/* editor variant: pantalla completa (sin recorte circular) */
.editor-mask--screen::before{
  background: linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.38));
  -webkit-mask: none;
}

.editor-frame{
  width: calc(100% - 34px);
  height: calc(100% - 34px);
  border-radius: 18px;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.35),
    0 10px 40px rgba(0,0,0,0.40);
}

.editor-bottom{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 2px 0;
}

.editor-tip{
  font-size: 12px;
  color: rgba(255,255,255,0.62);
}

.editor-zoom{ display:flex; gap: 10px; }



/* === Floating actions (sin barra superior) === */
.float-actions{
  position: fixed;
  top: calc(env(safe-area-inset-top) + 12px);
  z-index: 30;
  display: flex;
}
.float-actions.float-left{ left: 12px; }
.float-actions.float-right{ right: 12px; }

.float-btn{
  justify-content:center;
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(18px) saturate(150%);
  -webkit-backdrop-filter: blur(18px) saturate(150%);
  color: var(--text);
  box-shadow: 0 10px 30px rgba(0,0,0,0.28);
  transition: transform 140ms ease, background 180ms ease, border-color 180ms ease;
}
.float-btn:active{ transform: scale(0.98); }
.float-ic{ display:grid; place-items:center; width: 20px; height: 20px; opacity: 0.95; }
.float-tx{display:none !important;}

/* Oculta la barra vieja si quedara por algún motivo */
.topbar{ display:none !important; }


/* --- iOS PWA bottom safe-area cover (fix black bar) --- */
#safeFill{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  height: max(env(safe-area-inset-bottom), 26px);
  pointer-events: none;
  z-index: 50;
  background:
    linear-gradient(180deg, rgba(0,0,0,0), rgba(7,8,19,0.88) 70%, rgba(7,8,19,0.98)),
    radial-gradient(520px 320px at 30% 0%, rgba(52,215,255,0.14), rgba(0,0,0,0) 70%),
    radial-gradient(520px 320px at 70% 0%, rgba(184,107,255,0.12), rgba(0,0,0,0) 70%);
  backdrop-filter: blur(22px) saturate(160%);
  -webkit-backdrop-filter: blur(22px) saturate(160%);
}
